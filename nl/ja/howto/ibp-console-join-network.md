---

copyright:
  years: 2019
lastupdated: "2019-05-16"

keywords: getting started tutorials, create a CA, enroll, register, create an MSP, wallet, create a peer, create ordering service, Raft, join a network, system channel

subcollection: blockchain

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:note: .note}
{:important: .important}
{:tip: .tip}
{:pre: .pre}

# ネットワーク参加のチュートリアル
{: #ibp-console-join-network}

{{site.data.keyword.blockchainfull}} Platform は、ブロックチェーンのアプリケーションとネットワークを開発、デプロイ、運用できるようにする Blockchain as a Service オファリングです。 ブロックチェーンの各コンポーネントの概要およびコンポーネント同士の連携について詳しくは、[ブロックチェーン・コンポーネントの概要](/docs/services/blockchain/blockchain_component_overview.html#blockchain-component-overview)を参照してください。 このチュートリアルは、[サンプル・ネットワーク・チュートリアル・シリーズ](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network-sample-tutorial)の第 2 部であり、{{site.data.keyword.blockchainfull_notm}} Platform コンソールでノードを作成して、これらを別のクラスターでホストされているブロックチェーン共同事業体に接続する方法について説明しています。
{:shortdesc}

ベータ・トライアル・バージョンの {{site.data.keyword.blockchainfull_notm}} Platform を使用している場合は、コンソールの一部のパネルが、一般出荷可能 (GA) サービス・インスタンスに合わせて最新の情報が記載されている現在の文書とは異なる可能性があります。最新機能をすべて活用するには、[{{site.data.keyword.blockchainfull_notm}} Platform on {{site.data.keyword.cloud_notm}} の概説](/docs/services/blockchain/howto/ibp-v2-deploy-iks.html#ibp-v2-deploy-iks)の指示に従って、この時点で新しい GA サービス・インスタンスをプロビジョンすることをお勧めします。

**対象者:** このトピックは、ブロックチェーン・ネットワークの作成、モニター、管理を担当するネットワーク・オペレーターを対象に設計されています。  

{{site.data.keyword.blockchainfull_notm}} Platform をまだデプロイしていない場合は、[{{site.data.keyword.blockchainfull_notm}} Platform on {{site.data.keyword.cloud_notm}} の概説](/docs/services/blockchain/howto/ibp-v2-deploy-iks.html#ibp-v2-deploy-iks)を参照してください。ブロックチェーン・コンポーネント用に新しい Kubernetes クラスターを作成することも、{{site.data.keyword.cloud_notm}} アカウント内の既存のクラスターを使用することもできます。{{site.data.keyword.blockchainfull_notm}} Platform をデプロイしたら、コンソールを起動して、ブロックチェーン・コンポーネントを作成および管理できます。

有料版または無料版のどちらの Kubernetes クラスターにデプロイしたかにかかわらず、ノードをデプロイしてチャネルを作成するときには、Kubernetes ダッシュボードで、使用可能なリソースを慎重に確認してください。 Kubernetes クラスターを管理し、必要に応じて追加のリソースをデプロイする責任はユーザーにあります。 無料版のクラスターにもコンポーネントは正常にデプロイできますが、追加するコンポーネントが多くなるほど、コンポーネントの実行速度は遅くなります。 コンポーネントのサイズ設定およびコンソールと Kubernetes クラスターとの対話方法の詳細については、[リソースの割り振り](/docs/services/blockchain/howto/ibp-console-govern.html#ibp-console-govern-iks-console-interaction)を参照してください。
{: note}

## サンプル・ネットワークのチュートリアル・シリーズ
{: #ibp-console-join-network-structure}

この 3 部構成のチュートリアル・シリーズでは、{{site.data.keyword.blockchainfull_notm}} Platform 2.0 コンソールを使用し Kubernetes クラスターへのネットワークのデプロイやスマート・コントラクトのインストールとインスタンス化を行うことで、比較的にシンプルなマルチノードの Hyperledger Fabric ネットワークを作成して相互接続するプロセスを体験していきます。

* [ネットワーク構築チュートリアル](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network)では、順序付けサービスとピアを作成することで、ネットワークをホストするプロセスを学習します。
* **ネットワーク参加チュートリアル** (このチュートリアル) では、ピアを作成してチャネルに参加させることで、既存のネットワークに参加するプロセスを学習します。
* [ネットワークにスマート・コントラクトをデプロイする](/docs/services/blockchain/howto/ibp-console-smart-contracts.html#ibp-console-smart-contracts)では、スマート・コントラクトを作成してネットワークにデプロイする方法を学習します。

これらのチュートリアルの手順を使用すれば、複数の組織が参加する開発テスト用のネットワークを 1 つのクラスター内に構築できます。 順序付けサービスを作成して組織を追加することで、
ブロックチェーン・コンソーシアムを形成する場合は、**ネットワーク構築**のチュートリアルを使用してください。 ピアをネットワークに接続するには、**ネットワーク参加**のチュートリアルを使用してください。 さまざまなコンソーシアム・メンバーと一緒にこれらのチュートリアルを進めると、実際に**分散した**ブロックチェーン・ネットワークを作成できます。  


このチュートリアルの目的は、**既存の**ネットワークにピアを参加させる方法を示すことです。 このチュートリアルでは、すべてのチャネルおよびコンソーシアムをホストする順序付けサービスが、ご使用のクラスターまたは別の {{site.data.keyword.blockchainfull_notm}} Platform クラスター上に既に存在しているものと想定しています。参加先となる既存のネットワークがない場合は、[ネットワーク構築チュートリアル](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network)を参照してネットワークの作成方法を確認してください。 **ネットワーク参加**のチュートリアルでは、以下の図で青い四角枠で強調表示している `Org2` ブロックチェーン・コンポーネントを作成するステップを説明します。
![ネットワーク参加の構造](../images/ib2-join-network.png "ネットワーク参加の構造")  
*図 1. ネットワーク参加の構造*  
**ネットワーク参加**のチュートリアルのステップを実行して、以下のコンポーネントを作成し、以下のアクションを実行してください。

* **1 つのピア組織** `Org2`  
  組織 `Org2` を定義する Org2 メンバーシップ・サービス・プロバイダー (MSP) 定義を作成します。
* **1 つのピア** `Peer Org2`   
  上の図の台帳 `Ledger x` は分散ピアによって保守されています。 ピアは [Couch DB ![外部リンク・アイコン](../images/external_link.svg "外部リンク・アイコン")](https://hyperledger-fabric.readthedocs.io/en/release-1.4/couchdb_as_state_database.html) を状態データベースとして使用してデプロイされます。
* **1 つの認証局 (CA)** `Org2 CA`
  CA は、すべての組織管理者および組織に関連付けられているノードに証明書を発行するノードです。ピア組織 `Org2` 用に 1 つの CA を作成します。
* **単一チャネルへの参加**
  このチュートリアルでは、[ネットワーク構築チュートリアル](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network)で作成したチャネルに参加する方法を説明しています。

このチュートリアルでは、全体を通して、コンソールのフィールドの**推奨値**をいくつか記載しています。 推奨値を使用すれば、タブやドロップダウン・リストで名前や ID を見つけやすくなります。 これらの値は必須ではありませんが、使用すると便利です。特に、前のステップで入力した登録ユーザーの ID や機密事項といった特定の値を記憶しておく必要がある場合に役立ちます。これらの値を忘れた場合は、追加ユーザーを作成して登録する必要があります。各タスクの後に推奨値の表を示します。サンプル値を使用しない場合は、チュートリアルを進めながら、使用する値をどこかに記録することをお勧めします。
{:tip}

## ステップ 1: 追加の組織とブロックチェーンへのエントリー・ポイントを作成する
{: #ibp-console-join-network-create-ca-org2}

コンソールを使用して作成する組織ごとに、CA を 1 つ以上デプロイする必要があります。 CA とは、すべてのネットワーク参加者 (ピア、順序付けサービス、クライアント、管理者など) に証明書を発行するノードです。ネットワーク参加者は、署名証明書および秘密鍵を含むこれらの証明書を使用して通信および認証することができ、最終的にトランザクションを実行できます。これらの CA により、組織に属するすべての ID および証明書を作成し、さらに組織そのものを定義します。 その後、それらの ID を使用して、ノードのデプロイ、管理者 ID の作成、トランザクションの送信を行えます。CA および作成する必要がある ID について詳しくは、[ID の管理](/docs/services/blockchain/howto/ibp-console-identities.html#ibp-console-identities)を参照してください。

このチュートリアルでは、1 つの組織を作成します。そのため、**1 つの CA** を作成する必要があります。

### ピア組織の CA の作成
{: #ibp-console-join-network-create-CA-org2CA}

このチュートリアルでは、ユーザーおよびノードの証明書鍵と秘密鍵が CA によって発行されます。 それらの ID を、{{site.data.keyword.IBM_notm}} は管理しません。それらの鍵はコンソールにも保管されません。 これらはブラウザーのローカル・ストレージのみに保管されます。 そのため、ID および組織の MSP を必ずエクスポートしてください。別のマシンや別のブラウザーからコンソールにアクセスする場合は、それらの ID および組織の定義をインポートする必要があります。
{:important}

コンソールから以下の手順を実行します。  

1. 左側の**「ノード」**タブにナビゲートし、**「認証局の追加 (Add Certificate Authority)」**をクリックします。 サイド・パネルを使用して、作成する CA をカスタマイズできるとともに、この CA によって鍵が発行される対象となる組織をカスタマイズできます。
2. **「認証局の作成 (Create Certificate Authority)」**の下の**「{{site.data.keyword.cloud_notm}}」**をクリックし、**「次へ」**をクリックします。
3. 2 つ目のサイド・パネルを使用して、CA に**表示名**を付けます。 この CA の推奨値は `Org2 CA` です。
4. 次のパネルで、**CA 管理者の登録 ID** として `admin` を指定し、機密事項として `adminpw` を指定して、CA 管理者に資格情報を付与します。この場合も、これらは**推奨値**です。
5. 有料クラスターを使用している場合は、ノードのリソース割り振りを構成できます。 このチュートリアルでは、すべてのデフォルトを受け入れ、**「次へ」**をクリックします。 リソースをノードに割り振る方法について詳しくは、[リソースの割り振り](/docs/services/blockchain?topic=blockchain-ibp-console-govern#ibp-console-govern-allocate-resources)のトピックを参照してください。 無料クラスターを使用している場合は、**「サマリー」**ページに進みます。
6. 「サマリー」ページを確認し、**「認証局の追加 (Add certificate authority)」**をクリックします。

**タスク: ピア組織の CA の作成**

  | **フィールド** | **表示名** | **登録 ID** | **機密事項** |
  | ------------------------- |-----------|-----------|-----------|
  | **認証局の作成 (Create CA)** | Org2 CA  | admin | adminpw |

*図 2. ピア組織の CA の作成*  

CA をデプロイした後に、組織 MSP の作成時やユーザーの登録時にその CA を使用するとともに、ネットワークへのエントリー・ポイント (**ピア**) を作成するためにその CA を使用します。

既に独自の CA を所有している上級ユーザーは、コンソールで CA を新規作成する必要はない可能性があります。 既存の CA が `X.509` 形式の証明書を発行できる場合は、ここで新規 CA を作成せずに、その独自のサード・パーティー CA を使用できます。 詳しくは、[サード・パーティー CA をピアまたは順序付けサービスに使用する方法](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-identities)を参照してください。

### CA を使用して ID を登録する
{: #ibp-console-join-network-use-CA-org2}

作成するノードまたはアプリケーションごとに、ブロックチェーン・ネットワークに参加するための証明書と秘密鍵が必要です。これらのノードとアプリケーションをコンソールから管理可能にするために、これらのための管理者 ID も作成する必要があります。このプロセスは、作成した CA ごとに 1 回、合計 2 回行います。 そして CA ごとに、以下の 2 つの ID を作成します。

* **組織管理者**: この ID により、プラットフォーム・コンソールを使用してノードを操作できます。
* **ピア ID**: これはピア自体の ID です。ピアでは、アクション (例えば、トランザクションの承認) を実行するたびに、証明書を使用して署名します。

クラスターのタイプによっては、CA のデプロイメントに最大 10 分かかることがあります。 CA が初めてデプロイされる場合 (またはその他の理由で CA が使用可能でない場合) は、CA のタイル内のボックスはグレーのボックスになります。CA が正常にデプロイされ、実行されると、このボックスは緑になり、CA が「実行中」であり、ID の登録に使用できることを示します。ID を登録する下記の手順を始める前に、CA の状況が「実行中」になるまで待つ必要があります。
{:important}

CA が実行されると (タイルの緑のボックスで示されます)、以下の手順を実行してこれらの証明書が生成されます。

1. `Org2 CA` をクリックし、この CA に作成した `admin` ID が表に表示されていることを確認します。次に、**「ユーザーの登録」**ボタンをクリックします。
2. まず、組織の管理者を登録します。これには、**「登録 ID」**に `org2admin` を指定し、**「機密事項」**に `org2adminpw` を指定します。次に、この ID の`「タイプ」`を `client` に設定します (管理者 ID は常に `client` として登録する必要がありますが、ノード ID は常に `peer` タイプを使用して登録する必要があります)。「アフィリエーション」フィールドは上級者向けであり、このチュートリアルでは使用しないため、**「ルート所属団体の使用 (Use root affiliation)」**と示されているボックスをクリックします。Fabric CA によるアフィリエーションの使用方法について詳しくは、[Registering a new identity ![外部リンク・アイコン](../images/external_link.svg "外部リンク・アイコン")](https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html#registering-a-new-identity) のトピックを参照してください。 ここでは、リストから任意の所属団体を選択します (例えば、`org1`)。また、**「最大登録回数」**フィールドは無視します。エンロールの詳細については、[アイデンティティーの登録](/docs/services/blockchain/howto/ibp-console-identities.html#ibp-console-identities-register)を参照してください。**「次へ」**をクリックします。
4. このチュートリアルでは、**「属性の追加 (Add Attribute)」**を使用する必要はありません。ID 属性の詳細については、[アイデンティティーの登録](/docs/services/blockchain/howto/ibp-console-identities.html#ibp-console-identities-register)を参照してください。
5. 組織管理者を登録したら、ピアの ID に対しても同じプロセスを繰り返します (この場合も `Org2 CA` を使用します)。ピア ID に、登録 ID として `peer2` を指定し、機密事項として `peer2pw` を指定します。これはノード ID なので、**「タイプ」**に`ピア`を選択します。 **「ルート所属団体の使用 (Use root affiliation)」**と示されているボックスをクリックし、**「最大登録数」**は無視します。次のパネルでは、先ほどと同様に**「属性 (Attributes)」**を割り当てないでください。

これらの ID を CA に登録することは、ID を**作成**する最初のステップにすぎません。これらの ID は、**エンロール**されるまでは使用できません。`org2admin` ID の場合、エンロールは MSP の作成中に行われます。これについて、次の手順で説明します。ピアの場合は、ピアの作成中にエンロールが行われます。
{:note}

**タスク: ユーザーの登録**

  |  **フィールド** | **説明** | **登録 ID** | **機密事項** |
  | ------------------------- |-----------|-----------|-----------|-----------|
  | **ユーザーの登録** |  Org2 admin | org2admin | org2adminpw |
  | | ピア ID |  peer2 | peer2pw |

*図 3. CA を使用したユーザーの登録*  

### ピア組織 MSP の作成
{: #ibp-console-join-network-create-peers-org2}

ピアの CA を作成して、この CA を使用して組織アイデンティティーを**登録**したので、次にピアの組織の正式な定義を作成する必要があります。これはメンバーシップ・サービス・プロバイダー (MSP) 定義と呼ばれます。 複数のピアが単一の組織に属することができます。 **ピアを作成するたびに新しい組織を作成する必要はありません。** このチュートリアルを実行するのは今回が初めてであるため、この組織の MSP ID を作成します。 MSP の作成プロセスで、`org2admin` アイデンティティーの証明書を生成し、これらの証明書をウォレットに追加します。

1. 左側ナビゲーションの**「組織」**タブにナビゲートし、**「MSP 定義の作成 (Create MSP definition)」**をクリックします。
2. MSP の表示名に `Org2 MSP` および MSP ID に `org2msp` を指定します。 このフィールドで独自の MSP ID を指定する場合は、ツールチップに表示されるこの名前の制限事項に関する指定内容に従ってください。
3. **「ルート認証局の詳細 (Root Certificate Authority details)」**の下で、前の手順で ID を登録するために使用した CA を指定します。このチュートリアルを今回初めて実行する場合は、`Org2 CA` という 1 つの CA のみが表示されます。
4. これの下の**「登録 ID」**フィールドと**「機密事項の登録」**フィールドには、CA を使用して作成した最初のユーザーの登録 ID と機密事項 (`admin` および `adminpw`) が自動的に入力されます。ただし、この ID を使用すると、組織の ID が CA の ID と同じになります。セキュリティー上の理由から、これは推奨されません。代わりに、組織管理者用に作成した登録 ID である `org2admin` をドロップダウン・リストから選択し、この ID に関連付けられている機密事項の `org2adminpw` を入力します。そして、この ID に表示名 `Org2 Admin` を指定します。
5. **「生成 (Generate)」**ボタンをクリックして、このアイデンティティーを組織の管理者として登録して、このアイデンティティーをウォレットにエクスポートします。これは、ピアの作成時やチャネルの作成時に使用されます。
6. **「エクスポート」**をクリックして、管理者の証明書をファイル・システムにエクスポートします。 前述のように、この ID はクラスターに保管されることも {{site.data.keyword.IBM_notm}} によって管理されることもありません。 これはブラウザーのローカル・ストレージのみに保管されます。ブラウザーを変更する場合は、ピアを管理できるようにするために、この ID をウォレットにインポートする必要があります。
7. **「MSP 定義の作成 (Create MSP definition)」**をクリックします。

**タスク: ピア組織 MSP 定義の作成**

  |  | **表示名** | **MSP ID** | **登録 ID**  | **機密事項** |
  | ------------------------- |-----------|-----------|-----------|-----------|
  | **組織の作成** | Org2 MSP | org2msp |||
  | **ルート CA** | Org2 CA ||||
  | **組織管理者の証明書** | |  | org2admin | org2adminpw |
  | **ID** | Org2 Admin |||||

  *図 4. ピア組織 MSP 定義の作成*  

MSP を作成すると、**「ウォレット (Wallet)」**にピア組織管理者が表示されます。ウォレットには、左側のナビゲーションの**「ウォレット (Wallet)」**をクリックしてアクセスできます。

**タスク: ウォレットの確認**

  | **フィールド** |  **表示名** | **説明** |
  | ------------------------- |-----------|----------|
  | **ID** | Org2 Admin | Org2 のアイデンティティー |

  *図 5. ウォレットの確認*  

MSP について詳しくは、[組織の管理](/docs/services/blockchain/howto/ibp-console-organizations.html#ibp-console-organizations)を参照してください。

これらの証明書の管理および保護はお客様が行う作業ですので、組織管理者 ID をエクスポートすることは大切です。 順序付けサービスおよび順序付けサービスの MSP 定義をエクスポートすれば、それらを別のコンソールにインポートできます。そうすれば、そのコンソールで別のオペレーターが順序付けサービスに新しいチャネルを作成したり、チャネルにピアを参加させたりできるようになります。
{:important}

### ピアの作成
{: #ibp-console-join-network-peer-create}

[CA を作成](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-create-CA-org2CA)し、この CA を使用してアイデンティティーを登録し、[ピア組織 MSP](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-create-peers-org2) を作成したら、ピアを作成する準備ができています。

#### ピアの役割
{: #ibp-console-join-network-peer-role}

重要な留意事項として、組織自体が台帳を保守することはありません。 ピアが保守します。 また組織はピアを使用して、トランザクション提案に署名して、チャネル構成の更新を承認します。 チャネル上にピアが 2 つ以上存在すると、組織の可用性が高まります。チャネルにピアを 2 つ以上参加させることが、実動レベルの実装のベスト・プラクティスです。 このチュートリアルでは、単一のピアを作成するプロセスだけを説明します。

リソース割り振りの観点からは、同じピアを複数のチャネルに参加させることが可能です。 ピアの設計上、いずれかのチャネルのデータを、ピアを介して別のチャネルに渡すことができないようになっています。 ただし、ピアにはチャネルごとに別個の台帳が保管されるため、トランザクションとデータの負荷を処理するための十分な処理能力とストレージをピアが備えていることを確認する必要があります。

#### ピアのデプロイ
{: #ibp-console-join-network-deploy-peer-role}

コンソールを使用して以下の手順を実行します。

1. **「ノード」**ページで、**「ピアの追加」**をクリックします。
2. **「ピアの新規作成 (Create a new peer)」**の下の「{{site.data.keyword.cloud_notm}}」をクリックし、**「次へ」**をクリックします。
3. ピアの**「表示名」**に `Peer Org1` を指定します。
4. 次の画面で、ピア ID を登録するために使用した CA である、`Org2 CA` を選択します。ピア用に作成したピア ID の**登録 ID** である `peer2` をドロップダウン・リストから選択し、この ID に関連付けられている**機密事項**の `peer2pw` を入力します。そして、ドロップダウン・リストから `Org2 MSP` を選択し、**「次へ」**をクリックします。
5. 次のサイド・パネルでは、TLS CA 情報が求められます。 CA を作成したときに、TLSCA が一緒に作成されています。この CA は、ノードのセキュア通信層の証明書を作成するために使用されます。このため、ピア用に作成したピア ID の**登録 ID** である `peer2` をドロップダウン・リストから選択し、この ID に関連付けられている**機密事項**の `peer2pw` を入力します。**「TLS CSR ホスト名 (TLS CSR hostname)」**は、ピアのエンドポイントのアドレス指定に使用できるカスタム・ドメイン名を指定する上級者が使用可能なオプションです。カスタム・ドメイン名はこのチュートリアルでは扱わないため、ここでは**「TLS CSR ホスト名 (TLS CSR hostname)」**は空白のままにします。
6. 次のサイド・パネルでは、**ID を関連付けて**、ピアの管理者にすることを要求されます。このチュートリアルでは、組織の管理者である `Org2 Admin` をピアの管理者にもします。`Org2 CA` に異なる ID を登録およびエンロールして、その ID をピアの管理者にすることもできますが、このチュートリアルでは `Org2 Admin` ID を使用します。
7. 有料クラスターを使用している場合は、次のパネルで、ノードのリソース割り振りを構成できます。 このチュートリアルでは、すべてのデフォルトを受け入れ、**「次へ」**をクリックしてかまいません。 リソースをノードに割り振る方法について詳しくは、[リソースの割り振り](/docs/services/blockchain?topic=blockchain-ibp-console-govern#ibp-console-govern-allocate-resources)のトピックを参照してください。 無料クラスターを使用している場合は、**「サマリー」**ページが表示されます。
8. 要約を確認し、**「ピアの追加」**をクリックします。

**タスク: ピアのデプロイ**

  |  | **表示名** | **MSP ID** | **登録 ID** | **機密事項** |
  | ------------------------- |-----------|-----------|-----------|-----------|
  | **ピアの作成** | Peer Org2 | org2msp |||
  | **CA** | Org2 CA ||||
  | **ピア ID** | |  | peer2 | peer2pw |
  | **管理者証明書** | org2msp ||||
  | **TLS CA** | Org2 CA ||||
  | **TLS CA ID** | || admin | adminpw |
  | **ID の関連付け (Associate identity)** | Org2 Admin |||||

  *図 6. ピアのデプロイ*  

実動シナリオでは、各チャネルに 3 つのピアをデプロイすることが推奨されます。これは、1 つのピアがダウンしていても (例えば、保守期間中に)、可用性の高いピアを保持できるようにするためです。1 つの組織に複数のピアをデプロイするには、最初のピア ID を登録するために使用したものと同じ CA を使用します。このチュートリアルでは、これは `Org2 CA` です。次に、個別の登録 ID と機密事項を使用して新しいピア ID を登録します。例えば、`org2secondpeer` と `org2secondpeerpw` です。ピアの作成時に、この登録 ID と機密事項を指定します。このピアはまだ Org2 に関連付けられているため、ドロップダウン・リストから `Org2 CA`、`Org2 MSP`、および `Org2 Admin` を選択します。この新しいピアに異なる管理者を指定して、`Org2 CA` に登録およびエンロールすることもできますが、これはオプションです。このチュートリアルのシリーズでは、ピア組織ごとに単一のピアを作成するプロセスのみを説明します。
{:tip}

## ステップ 2: トランザクションを実行できる組織のリストに組織を追加する
{: #ibp-console-join-network-add-org2}

前述のとおり、ピア組織がチャネルを作成したり、チャネルに参加したりするには、ピア組織が順序付けサービスに認識されている必要があります (これを、順序付けサービスに認識されている組織のリストである「コンソーシアム」に参加するとも言います)。技術的なレベルで言うと、チャネルは、順序付けサービスを介してピア間をつなぐ**メッセージング・パス**であるからです。 チャネル間で情報を受け渡しすることなく、単一のピアを複数のチャネルに参加させることができるのと同様に、単一の順序付けサービスは他のチャネル上の組織にデータを公開することなく、その順序付けサービスを通過する複数のチャネルを持つことができます。

順序付けサービス管理者のみがピア組織をコンソーシアムに追加できるため、次のいずれかを実行する必要があります。

* 順序付けサービス管理者に**なります**。この場合は、作成したピア組織を自分で直接コンソーシアムに追加できます。
* 順序付けサービス管理者に、MSP 情報を**送信**します。管理者は、組織を自分のコンソーシアムに追加します。

次の手順では、作成したピア組織を自分が管理するコンソーシアムに追加する方法を示します。順序付けサービスをホストしているコンソールに自分の組織をエクスポートする方法については、以下の[組織情報のエクスポート](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-add-org2-remote)を参照してください。

### コンソールでの順序付けサービスへのピアの組織の追加
{: #ibp-console-join-network-add-org2-local}

**順序付けサービスおよび参加先として希望するチャネルがコンソールに既に含まれている場合にのみ、以下のステップを実行してください。** そうでない場合は、[組織情報のエクスポート](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-add-org2-remote)に進んでください。

ピア組織をコンソーシアムに追加できるのは順序付けサービス管理者のみであるため、順序付けサービス管理者になる必要があります。つまり、ウォレット内に順序付けサービス組織の管理者 ID を持っている必要があります。

1. **「ノード」**タブにナビゲートします。
2. 使用する順序付けサービスまでスクロールダウンして、その順序付けプログラムをクリックして開きます。
3. **「コンソーシアム・メンバー (Consortium Members)」**の下の**「組織の追加 (Add Organization)」**をクリックします。
4. ドロップダウン・リストから、`Org2 MSP` を選択します。これが、`org2` を表す MSP であるからです。
5. **「組織の追加」**をクリックします。

次に、ピア組織をチャネルに追加します。
1. **「チャネル」**タブにナビゲートして、`channel1` をクリックします。
2. **「設定」**アイコンをクリックして、チャネルを更新し、ピア組織をチャネルに追加します。
3. **「使用可能な順序付けサービスから選択 (Choose from available ordering services)」**ドロップダウン・リストで、`Ordering Service` が選択されていることを確認します。
4. **「チャネル・アップデーター MSP ID (Channel Updater MSP ID)」**ドロップダウン・リストで、`org1MSP` が選択されていることを確認します。
5. **「ID の関連付け (Associate available identity)」**ドロップダウン・リストで、`Org1Admin` が選択されていることを確認します。
6. `「チャネルへの組織の追加 (Add organizations to the channel)」`というセクションまでスクロールダウンして、`「チャネル・メンバーの選択 (Select a channel member)」`ドロップダウン・リストを開いて、`Org2 MSP` というピア組織 MSP を選択します。
7. **「追加 (Add)」**をクリックしてから、その組織の許可を割り当てます。 その組織がチャネルを更新できるようにするために、`Operator` という許可を割り当てることをお勧めします。
8. **「チャネルの更新 (Update channel)」**をクリックします。

このプロセスが完了したら、`org2` は `Ordering Service` 上でホストされるチャネルを作成、またはチャネルに参加できるようになります。[ステップ 3: ピアをチャネルに参加させる](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-join-peer-org2)に進んでください。

### 組織情報のエクスポート
{: #ibp-console-join-network-add-org2-remote}

**順序付けサービスおよびピアの参加先チャネルが別の {{site.data.keyword.blockchainfull_notm}} Platform サービス・インスタンスに存在している場合のみに、以下のステップを実行してください。** そうでない場合は、[ステップ 3: ピアをチャネルに参加させる](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-join-peer-org2)に進んでください。

以下のステップを実行し、組織 MSP 定義を順序付けサービス管理者に送信して、共同事業体に追加してもらう必要があります。

以下のステップを実行する際は、**ピア組織**の管理者である必要があります。つまり、ピア組織の管理者アイデンティティーをウォレット内に持っている必要があります。

1. **「組織」**タブにナビゲートします。 エクスポート可能な組織が**「使用可能な組織 (Available organizations)」**に一覧表示されます。 組織タイル内の**「ダウンロード」**ボタンをクリックして、ピア組織の MSP を表す JSON 構成ファイルをダウンロードします。
2. このファイルを順序付けサービス管理者にアウト・オブ・バンド操作で送信します。

### 組織定義のインポート
{: #ibp-console-join-network-import-remote-msp}

順序付けサービス管理者は、この JSON ファイルをインポートして、ユーザーの組織をそのユーザーのコンソールに追加する必要があります。

1. **「組織」**タブにナビゲートして、**「MSP 定義のインポート (Import MSP definition)」**ボタンをクリックして、ピア組織 MSP 定義を表す JSON ファイルを選択します。
2. **「ノード」**ページにナビゲートして、順序付けサービス・ノードをクリックします。 順序付けサービス・パネルの**「コンソーシアム・メンバー (Consortium Members)」**で、**「組織の追加 (Add Organization)」**をクリックします。 開いたサイド・パネルで、**「組織」**タブの MSP 定義のリストから `Org2 MSP` を選択します。
3. **「チャネル」**タブにナビゲートして、`channel1` をクリックしてから、**「設定」**アイコンをクリックして、チャネルを更新して、ピア組織をチャネルに追加します。
4. **「使用可能な順序付けサービスから選択 (Choose from available ordering services)」**ドロップダウン・リストで、`Ordering Service` が選択されていることを確認します。
5. **「チャネル・アップデーター MSP ID (Channel Updater MSP ID)」**ドロップダウン・リストで、`org1MSP` が選択されていることを確認します。
6. **「ID の関連付け (Associate available identity)」**ドロップダウン・リストで、`Org1Admin` が選択されていることを確認します。
7. `「チャネルへの組織の追加 (Add organizations to the channel)」`というセクションまでスクロールダウンして、`「チャネル・メンバーの選択 (Select a channel member)」`ドロップダウン・リストを開いて、このチュートリアルで使用する `Org2 MSP` というピア組織 MSP を選択します。
8. **「追加 (Add)」**をクリックしてから、その組織の許可を割り当てます。 その組織がチャネルを更新できるようにするために、`Operator` という許可を割り当てることをお勧めします。
9. **「チャネルの更新 (Update channel)」**をクリックします。

順序付けサービスの管理者がピア組織をコンソーシアムとチャネルに参加させた後に、順序付けサービスをコンソールにインポートする必要があります。その後、順序付けサービスによってホストされているチャネルに参加できます。 以下のステップを実行し、順序付けサービスを**インポート**してください。

**順序付けサービス組織**の管理者は、以下のステップを最初に実行する必要があります。

1. **「ノード」**タブ内で順序付けサービスにナビゲートして、順序付けサービス名の右側にある**「設定」**アイコンをクリックしてサイド・パネルを開きます。 **「アクション」**の下にある**「エクスポート」**ボタンをクリックして JSON 構成ファイルをダウンロードします。
2. このファイルをピア組織にアウト・オブ・バンド操作で送信します。 ピア組織の管理者は、この構成ファイルを使用して順序付けサービスをコンソールに追加できます。

### 別のクラスターからの順序付けサービスのインポート
{: #ibp-console-join-network-import-remote-orderer}

**ピア組織**の管理者である場合は、以下のステップを実行します。

1. **「ノード」**ページにナビゲートして、**「順序付けサービスの追加 (Add ordering service)」**をクリックします。
2. **「既存の順序付けサービスのインポート (Import an existing ordering service)」**の下の「{{site.data.keyword.cloud_notm}}」をクリックします。
3. **「JSON のアップロード (Upload JSON)」**ボタンをクリックして、ノード自体を表す JSON を選択します。
4. 後続のステップで、アイデンティティーを関連付けることを求められたら、ピア組織のアイデンティティーを選択します。 このチュートリアルでは、これは `Org2 Admin` です。**「順序付けサービスのインポート (Import ordering service)」**をクリックします。

## ステップ 3: ピアをチャネルに参加させる
{: #ibp-console-join-network-join-peer-org2}

チュートリアルの完了までもう少しです。 この時点で、ピアを既存のチャネルに参加させることができるようになりました。 チャネルのメンバーである組織から、`channel name` をアウト・オブ・バンドで取得する必要があります。**ネットワーク構築**のチュートリアルで、`channel1` という名前のチャネルを作成しました。 まだこの場所にアクセスしていない場合は、左側のナビゲーションで**「チャネル」**タブにナビゲートします。

コンソールから以下の手順を実行します。

1. **「チャネルへの参加 (Join channel)」**ボタンをクリックしてサイド・パネルを立ち上げます。
2. `Ordering Service` という名前の順序付けサービスを選択し、**「次へ」**をクリックします。
3. 参加するチャネルの名前 (`channel1`) を入力して、**「次へ」**をクリックします。
4. チャネルに参加させるピアを選択します。 このチュートリアルでは、`Peer Org2` をクリックします。
5. **「チャネルへの参加 (Join channel)」**をクリックします。

Hyperledger Fabric の [Private Data ![外部リンク・アイコン](../images/external_link.svg "外部リンク・アイコン")](https://hyperledger-fabric.readthedocs.io/en/release-1.4/private-data/private-data.html "Private Data") または [Service Discovery ![外部リンク・アイコン](../images/external_link.svg "外部リンク・アイコン")](https://hyperledger-fabric.readthedocs.io/en/release-1.4/discovery-overview.html "Service Discovery") の機能を利用する予定の場合は、組織内のアンカー・ピアを**「チャネル」**タブで構成する必要があります。 コンソールの**「チャネル」**タブを使用してプライベート・データ用のアンカー・ピアを構成する方法について詳しくは、[プライベート・データ](/docs/services/blockchain/howto/ibp-console-smart-contracts.html#ibp-console-smart-contracts-private-data)を参照してください。

組織がコンソーシアムのメンバーになっている場合は、新しいチャネルを作成することもできます。 [ネットワーク構築チュートリアル](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network)で説明されている[チャネルを作成する](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network-create-channel)手順を実行してください。

## 次のステップ
{: #ibp-console-join-network-next-steps}

ピアをチャネルに参加させた後に、以下のステップを実行して、スマート・コントラクトをデプロイして、ブロックチェーンへのトランザクション送信を開始してください。

- コンソールを使用して[ネットワークにスマート・コントラクトをデプロイします](/docs/services/blockchain/howto/ibp-console-smart-contracts.html#ibp-console-smart-contracts)。
- スマート・コントラクトをインストールしてインスタンス化すると、[クライアント・アプリケーションを使用してトランザクションを送信](/docs/services/blockchain/howto/ibp-console-smart-contracts.html#ibp-console-smart-contracts-connect-to-SDK)できます。
- [コマーシャル・ペーパーのサンプル](/docs/services/blockchain/howto/ibp-console-create-app.html#ibp-console-app-commercial-paper)を使用して、サンプルのスマート・コントラクトをデプロイして、サンプル・アプリケーション・コードからトランザクションを送信します。
