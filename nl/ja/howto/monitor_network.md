---

copyright:
  years: 2017, 2018
lastupdated: "2018-06-14"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}

# ブロックチェーン・ネットワークのモニタリング

このチュートリアルでは、{{site.data.keyword.cloud_short}} で{{site.data.keyword.blockchain}}・ネットワークの状況情報を表示し、モニターする方法を示します。
{:shortdesc}


## ピア、順序付けプログラム、および CA のモニタリング
{: #monitor-nodes}

ネットワーク・ノードのいずれかに対して HTTP **HEAD** 要求を発行し、ノード状況を確認できます。ネットワーク・ノードには、ブロックチェーン・ネットワーク内のピア、順序付けプログラム、または CA があります。**HEAD** 要求は GET 要求に似ており、本文のないヘッダーのみを送信します。ノードが正常に機能している場合は、200 応答を取得します。

1. ネットワーク・モニターの「概要」画面で、**「接続プロファイル」**をクリックします。次に、**「未加工の JSON」**をクリックして、Web ブラウザーで接続プロファイルを表示するか、**「ダウンロード」**をクリックして接続プロファイルをローカルに保存することができます。
2. 接続プロファイルで、確認するネットワーク・ノードの URL 情報を見つけます。例えば、`fabric-orderer-20190b` 順序付けプログラムの URL は `grpcs://fft-zbc02b.4.secure.blockchain.ibm.com:20190` です。  
    ![順序付けプログラムの URL の例](../images/orderer_url.png "順序付けプログラムの URL の例")
3. URL 内の **grpcs** を **https** に置き換えます。上記の例では、URL は `https://fft-zbc02b.4.secure.blockchain.ibm.com:20190` になります。
4. curl または Chrome Postman アプリなどのツールを使用して、URL に対して **HEAD** 要求を発行します。
    - 200 状況応答を受け取った場合、ネットワーク・ノードは正常に機能しています。
    - **HEAD** 要求が接続エラーで失敗する場合は、ネットワーク・ノードが稼働していない可能性があるか、ノードの URL が間違っているか、ファイアウォールによってノードへのアクセスがブロックされています。このエラーを解決する必要があります。解決しないと、アプリケーションがノードに接続できません。

以下の例に、curl での **HEAD** 要求と 200 応答を示します。HTTP **HEAD** 要求によりノードがアクセス可能かどうかが確認されるため、grpc エラーは無視することができます。アクセス可能な場合、アプリケーションではノードに対する grpc 要求も機能します。

```
C:\>curl -i --head https://fft-zbc02b.4.secure.blockchain.ibm.com:20190
HTTP/2 200
contnent-type: application/grpc
grpc-status: 8
grpc-message: malformed method name: "/"
```
{:codeblock}

以下の例は、curl での **HEAD** 要求と接続エラーを示しています。

```
C:\>curl -i --head https://fft-zbc02b.4.secure.blockchain.ibm.com:20190
curl: (7) Failed to connect to fft-zbc02b.4.secure.blockchain.ibm.com:20190: Connection refused
```
{:codeblock}

以下の図は、Chrome Postman アプリでの **HEAD** 要求と 200 応答を示しています。  

![HEAD 要求の Postman の例](../images/orderer_head_postman.png "HEAD 要求の Postman の例")


## チャネルのモニター
{: #monitor-channnels}

ネットワーク・モニターを開始し、「チャネル」画面で表示してモニターするチャネルを見つけます。  特定のチャネル画面にある 3 つのタブで、このチャネルのデータ状況情報、メンバー、インスタンス化されたチェーンコードを表示できます。

* **チャネルの概要 (Channel Overview)**  
  「チャネルの概要 (Channel Overview)」タブには、このチャネルに関する以下のブロック情報が示されます。
    * 作成されたブロックの総数、最後のトランザクション以降の時間、チェーンコードのインスタンス化の数、チェーンコードの呼び出しの数を含む、一連のデータ・ポイント。
    * このチャネルにあるすべてのブロックをリストした表。  ブロックを展開して、そのブロックの詳細情報を表示できます。  

  ![チャネルの概要](../images/channel_overview_detail.png "チャネルの概要")  

* **メンバー**  
  「メンバー」タブには、組織のオペレーターの E メール・アドレスなど、このチャネルのメンバーに関する情報が示されます。![チャネル・メンバー](../images/channel_members.png "チャネル・メンバー")  

* **チェーンコード**  
  「チェーンコード」タブには、このチャネルでインスタンス化されたすべてのチェーンコードがリストされ、チェーンコード ID、バージョン、チェーンコードを実行しているピアの数が示されます。   

  チェーンコードの行を展開すると、そのチェーンコードの詳細情報が得られます。  
    * **「JSON」**をクリックすると、チェーンコードの JSON ファイルを表示できます。
    * **「ログ」**をクリックすると、チェーンコードのログを表示できます。
    * **「削除」**をクリックすると、実行中のチェーンコード・コンテナーを削除できます。
    **注**: 実行中のチェーンコード・コンテナーを削除しても、実際にチェーンコードが削除されるわけではありません。 ブロックチェーン・ネットワーク上でインスタンス化されたチェーンコードは削除できません。

  ![チャネル・チェーンコード](../images/channel_chaincode.png "チャネル・チェーンコード")


## ブロックチェーンのモニタリング
{: #monitor-chaincode}

ネットワーク・モニターを入力して、「コードのインストール (Install Code)」画面を開きます。 チェーンコードを実行している場合は、ドロップダウン・リストからピアを選択すると、このピアのすべてのチェーンコードがチェーンコードID とバージョンとともにテーブルに表示されます。  この画面でチェーンコードのインストールおよびインスタンス化を実行できます。  詳しくは、[チェーンコードのインストール、インスタンス化、および更新](install_instantiate_chaincode.html)を参照してください。

  ![チェーンコード](../images/chaincode_install_overview.png "チェーンコード")


## サンプル・アプリケーションのモニター
{: #monitor-apps}

スターター・プラン・ネットワークでは、ネットワーク・モニターの「サンプルの試用 (Try Samples)」画面でサンプル・アプリケーションを表示してアクセスできます。  サンプル・アプリケーションをデプロイした後、**「起動」**ボタンをクリックしてアプリケーション・インターフェースに入るか、**「Github で表示」**リンクをクリックしてコード・リポジトリーにアクセスできます。  詳しくは、
[サンプル・アプリケーションの開発](prebuilt_samples.html)を参照してください。

  ![サンプル・アプリケーション](../images/sampleappflow0.png "サンプル・アプリケーション")
