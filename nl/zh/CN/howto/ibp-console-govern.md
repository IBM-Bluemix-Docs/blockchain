---

copyright:
  years: 2019
lastupdated: "2019-07-16"

keywords: network components, IBM Cloud Kubernetes Service, allocate resources, batch timeout, channel update, reallocate resources

subcollection: blockchain

---

{:external: target="_blank" .external}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:note: .note}
{:important: .important}
{:tip: .tip}
{:pre: .pre}

# 管理组件
{: #ibp-console-govern}

创建 CA、同级、排序节点、组织和通道后，可以使用控制台来更新这些组件。
{:shortdesc}

如果使用的是 Beta 试用版 {{site.data.keyword.blockchainfull_notm}} Platform for {{site.data.keyword.cloud_notm}}，那么控制台中的某些面板可能与当前的文档不一致，该文档对应于一般可用 (GA) 服务实例并保持最新。要利用所有最新的功能，目前建议您遵循 [{{site.data.keyword.blockchainfull_notm}} Platform for {{site.data.keyword.cloud_notm}} 入门](/docs/services/blockchain/howto?topic=blockchain-ibp-v2-deploy-iks#ibp-v2-deploy-iks)中的指示信息来供应新的 GA 服务实例。


**目标受众：**本主题适用于负责创建、监视和管理区块链网络的网络操作员。

## 控制台如何与 Kubernetes 集群进行交互
{: #ibp-console-govern-iks-console-interaction}

网络操作员负责监视 CPU、内存和存储用量，并在尝试创建节点或调整节点大小**之前**，确保有充分的资源可用。
{:important}

由于 {{site.data.keyword.blockchainfull_notm}} Platform 控制台实例和 Kubernetes 集群之间并不会就可用资源直接进行交流，因此使用控制台来部署组件或调整组件大小的过程必须遵循以下模式：

1. **设置要执行的部署的大小**。控制台中 CA、同级和排序节点的**资源分配**面板为每个节点提供缺省 CPU、内存和存储器分配。您可能需要根据用例来调整这些值。如果不确定如何调整，请首先使用缺省分配，然后随着对需求的了解进行相应调整。与此类似，**资源重新分配**面板显示现有资源分配。

  要粗略了解集群中将需要的存储量和计算量，请参阅此列表后面的图表，其中包含同级、排序节点和 CA 的当前缺省值。

2. **检查 Kubernetes 集群中是否有足够的资源**。如果使用的是 {{site.data.keyword.cloud_notm}} 中托管的 Kubernetes 集群，建议将 [{{site.data.keyword.cloud_notm}} SysDig](https://www.ibm.com/cloud/sysdig){: external} 工具与 {{site.data.keyword.cloud_notm}} Kubernetes 仪表板组合使用。如果集群中没有足够的空间来部署资源或调整资源大小，那么需要增加 {{site.data.keyword.cloud_notm}} Kubernetes Service 集群的大小。有关如何增加集群大小的更多信息，请参阅[缩放集群](/docs/containers?topic=containers-ca#ca){: external}。如果使用的是除 {{site.data.keyword.cloud_notm}} 之外的云提供者，那么必须查阅其文档以了解如何缩放集群。如果集群中有足够的空间，那么可以继续执行步骤 3。
3. **使用控制台来部署节点或调整节点大小**。如果 Kubernetes pod 足够大，可容纳节点的新大小，那么重新分配应该会顺利进行。如果正在运行 pod 的工作程序节点的资源不足，那么可以向集群添加更大的新工作程序节点，然后删除现有工作节点。

|**组件**（所有容器）|CPU**|内存 (GB)|存储器 (GB) |
|--------------------------------|---------------|-----------------------|------------------------|
|**同级**| 1.1           |2.4|200（包括 100 GB 用于同级，100 GB 用于 CouchDB）|
|**CA**|0.1|0.2|20|
|**排序节点**| 0.35          |0.9|100|
** 如果使用的是 {{site.data.keyword.cloud_notm}} Private，那么这些值可能会略有不同。部署节点时，实际的 VPC 分配会显示在区块链控制台中。  

如果计划部署五节点 Raft 排序服务，请注意部署总数将增加为五倍。因此，五个 Raft 节点共有 1.75 个 CPU、4.5 GB 内存和 500 GB 存储器。建议至少使用具有 4 个 CPU 的 Kubernetes 单工作程序节点集群，以允许 Raft 集群及您部署的任何其他节点具有足够的 CPU。
{:tip}

如果用户希望尽可能减少费用而不必完全关闭节点或删除节点，可以将节点缩减到最小 0.001 个 CPU（1 毫 CPU）。请注意，使用此 CPU 量时，节点将无法正常运作。

虽然我们已尽可能使本主题中的数字精确，但请注意，有时即使看起来集群中有足够的空间，节点也可能无法部署。请确保参考 Kubernetes 仪表板，以查看组件何时能部署，以及在组件无法部署时，是否有错误消息。如果组件由于资源不足而未部署，那么就算集群中似乎有足够的空间，也可能必须为要部署的组件部署额外的集群资源。
{:important}

## 分配资源
{: #ibp-console-govern-allocate-resources}

免费集群的用户对于与其节点关联的容器**必须使用缺省大小**，而付费集群的用户可以在创建其节点期间设置这些值。

控制台中的**资源分配**面板为创建节点所涉及的各个字段提供缺省值。选择这些值是因为它们比较适合入门。但是，每个用例各不相同。虽然本主题将为如何考虑使用这些值提供指导，但最终是由用户来监视其节点，并找到适合的大小设置。因此，除非用户肯定自己需要的值与缺省值不同，否则，切合实际的策略是首先使用这些缺省值，以后再进行调整。有关 {{site.data.keyword.blockchainfull_notm}} Platform 所基于的 Hyperledger Fabric 的性能和规模概述，请参阅 [Answering your questions on Hyperledger Fabric performance and scale](https://www.ibm.com/blogs/blockchain/2019/01/answering-your-questions-on-hyperledger-fabric-performance-and-scale/){: external}。

与节点关联的所有容器都具有 **CPU** 和**内存**，而与同级、排序节点和 CA 关联的特定容器还具有**存储器**。有关存储器的更多信息，请参阅[持久性存储器注意事项](/docs/services/blockchain?topic=blockchain-ibp-v2-deploy-iks#ibp-console-storage)。

监视集群中的 CPU、内存和存储器使用情况由您负责。如果确实不巧为某个区块链节点请求的资源多于可用资源，那么该节点将无法启动，但现有节点不会受到影响。如果是将 {{site.data.keyword.cloud_notm}} 用作云提供者，那么可以使用控制台和 {{site.data.keyword.cloud_notm}} Kubernetes Service 仪表板来更改 CPU 和内存。但是，节点创建后，以后只能使用 {{site.data.keyword.cloud_notm}} CLI 来更改存储器。有关如何在其他云提供者中增大 CPU、内存和存储器的信息，请参阅这些云提供者的文档。
{:note}

每个节点都有一个 gRPC Web 代理容器，用于引导控制台与节点之间的通信层。此容器具有固定的资源值，并包含在“资源分配”面板中，可准确估算 Kubernetes 集群上需要多少空间才能部署节点。由于此容器的值无法更改，因此在以下各部分中不会讨论 gRPC Web 代理。

### 认证中心 (CA)
{: #ibp-console-govern-CA}

与积极参与事务处理过程的同级和排序节点不同，CA 仅参与身份的注册和登记以及 MSP 的创建。这意味着 CA 需要的 CPU 和内存较少。要使 CA 资源变得紧张，用户需要向 CA 发出大量请求（可能是使用 API 和脚本），或者使其签发大量证书而导致存储量不足。在典型的操作中，这些情况应该都不会发生，不过，这些值应始终反映出特定用例的需求。

CA 只有一个关联的容器可以调整：

* **CA 本身**：封装内部 CA 流程，例如注册和登记节点与用户，以及存储它所签发的每个证书的副本。

#### 创建期间设置 CA 大小
{: #ibp-console-govern-CA-sizing-creation}

CA 只有一个容器的值需要关注，因为 gRPC Web 代理服务器的值无法更改。

|资源|增大条件|
|-----------------|-----------------------|
|**CA 容器的 CPU 和内存**|预期 CA 会接收到大量注册和登记请求时。|
|**CA 存储器**|计划使用此 CA 注册大量用户和应用程序时。|

### 同级
{: #ibp-console-govern-peers}

同级有三个关联的容器可以调整：

- **同级本身**：封装其所属的所有通道的内部同级进程（例如，验证事务）和区块链（即，事务处理历史记录）。请注意，同级的存储内容还包括安装在同级上的智能合同。
- **CouchDB**：存储同级的状态数据库的位置。回想一下，每个通道都有一个不同的状态数据库。
- **智能合同**：回想一下，在事务处理过程中，会“调用”（即，运行）相关智能合同。请注意，在同级上安装的所有智能合同都将在智能合同容器内的单独容器中运行，后者称为 Docker-in-Docker 容器。  

同级还包含用于**日志收集器**的容器，该容器将智能合同容器中的日志通过管道传输到同级容器。与 gRPC Web 代理容器类似，此容器的计算量也无法调整。

#### 创建期间设置同级大小
{: #ibp-console-govern-peers-sizing-creation}

如有关[控制台如何与 Kubernetes 集群进行交互](/docs/services/blockchain/howto?topic=blockchain-ibp-console-govern#ibp-console-govern-iks-console-interaction)的部分中所述，建议使用这些同级容器的缺省值，并在以后清楚地了解您的用例如何利用这些容器后再进行调整。

|资源|增大条件|
|-----------------|-----------------------|
|**同级容器的 CPU 和内存**|预期立即有高事务处理吞吐量时。|
|**同级存储器**|预计在此同级上会安装大量智能合同以及要将此同级加入多个通道时。回想一下，此存储器还将用于存储同级加入的所有通道中的智能合同。请记住，我们估算的“小型”事务处于 10,000 字节 (10k) 范围内。由于缺省存储器为 100G，这意味着同级存储器中的事务总数多达 1000 万后，才需要对存储器进行扩展（实际上，最大数会小于此值，因为事务的大小可能会变化，并且此数字并不包括智能合同）。因此 100G 可能看起来比所需的存储器大得多，但请记住，存储器相对便宜，而且增大存储器的过程要比增大 CPU 或内存更困难（需要使用命令行）。|
|**CouchDB 容器的 CPU 和内存**|预计有针对大型状态数据库的大量查询时。通过使用[索引](https://hyperledger-fabric.readthedocs.io/en/release-1.4/couchdb_as_state_database.html#couchdb-indexes){: external}可在某种程度上减轻此影响。然而，大量查询可能会给 CouchDB 造成压力，这会导致查询和事务处理超时。|
|**CouchDB（分类帐数据）存储器**|预期许多通道上有高吞吐量并且不打算使用索引时。但是，与同级存储器一样，缺省 CouchDB 存储器也为 100G，这很重要。|
|**智能合同容器的 CPU 和内存**|预期某个通道上有高吞吐量时，尤其是一次调用多个智能合同的情况。|

### 排序节点
{: #ibp-console-govern-ordering-nodes}

排序节点既不维护状态数据库，也不托管智能合同，因此需要的容器少于同级。但排序节点会托管区块链（事务处理历史记录），因为区块链是存储通道配置的位置，所以排序服务必须知道最新的通道配置才能发挥其作用。

与 CA 类似，排序节点只有一个关联的容器可以调整（如果要部署五节点排序服务，那么需要五组独立的排序节点容器）：

* **排序节点本身**：封装其所托管的所有通道的内部排序节点进程（例如，验证事务）和区块链。

#### 创建期间设置排序节点大小
{: #ibp-console-govern-orderer-sizing-creation}

如有关 [{{site.data.keyword.cloud_notm}} Kubernetes Service 如何与控制台进行交互](/docs/services/blockchain/howto?topic=blockchain-ibp-console-govern#ibp-console-govern-iks-console-interaction)的部分中所述，建议使用这些排序节点容器的缺省值，并在以后清楚地了解如何利用这些容器后再进行调整。

|资源|增大条件|
|-----------------|-----------------------|
|**排序节点容器的 CPU 和内存**|预期立即有高事务处理吞吐量时。|
|**排序节点存储器**|预计此排序节点将属于位于许多通道上的某个排序服务时。回想一下，排序服务会为其所托管的每个通道保留区块链的副本。排序节点的缺省存储器为 100G，与同级本身的容器相同。|

确保排序节点具有足够的 CPU 和内存被视为最佳实践。如果排序服务消耗过度，可能会遇到超时并开始丢弃事务，这需要重新提交事务。相比尽力满足要求的单个同级，此情况给网络造成的损害要大得多。在 Raft 排序服务配置中，消耗过度的领导节点可能会停止发送脉动信号消息，而触发领导节点选举，并临时停止事务排序。同样，追随节点可能会错过消息，并尝试触发不需要的领导节点选举。
{:important}

## 重新分配资源
{: #ibp-console-govern-reallocate-resources}

调整节点大小后，在更改生效之前可能会有延迟，原因是正在重建容器。
{:important}

如上所述，如果云提供者为 {{site.data.keyword.cloud_notm}}，建议将 [{{site.data.keyword.cloud_notm}} SysDig](https://www.ibm.com/cloud/sysdig){: external} 工具与 {{site.data.keyword.cloud_notm}} Kubernetes 仪表板组合使用，以监视 Kubernetes 资源使用情况。如果确定工作程序节点资源不足，那么可以向集群添加更大的新工作程序节点，然后删除现有工作节点。
{:note}

虽然从一开始就为 Kubernetes 集群部署足够的资源，因此不必增加集群中的资源就可部署和扩展资源的这种做法所需的工作量较少，但部署越大，成本越高。用户需要认真考虑自己的选项，并且无论选择哪种选项，都对所做的权衡有清楚的认识。

如果云提供者为 {{site.data.keyword.cloud_notm}} 或其他云提供者（使用 {{site.data.keyword.cloud_notm}} Private），那么可以手动缩放集群，监视节点，并添加更多节点或更大的节点。虽然此过程需要大量人工，但优点是用户对向其云帐户收取的费用始终心里有数。

如果用户已使用 {{site.data.keyword.cloud_notm}} Kubernetes Service 部署到 {{site.data.keyword.cloud_notm}}，那么用户还能够使用 {{site.data.keyword.cloud_notm}} Kubernetes Service **自动缩放器**。自动缩放器可根据 pod 规范设置和资源请求，对工作程序节点进行扩展或缩减。有关 {{site.data.keyword.cloud_notm}} Kubernetes Service 自动缩放器及其设置方式的更多信息，请参阅 {{site.data.keyword.cloud_notm}} 文档中的[缩放集群](/docs/containers?topic=containers-ca#ca){: external}。请注意，允许自动缩放器调整资源将向您的 {{site.data.keyword.cloud_notm}} Kubernetes Service 帐户收取费用，具体费用根据使用量而变化。

要在控制台中进行手动缩放，请在**节点**页面上单击要调整的节点，然后单击**使用情况**选项卡。您可以看到名为**重新分配**的按钮，用于启动**资源分配**选项卡，该选项卡与创建节点时看到的选项卡非常相似。如果要降低可用资源量，只需提供更小的值，单击该选项卡上的**重新分配资源**，然后单击生成的**摘要**页面。

如果要增大节点的 CPU 和内存，请使用控制台中的**资源分配**选项卡来增大这些值。页面底部的白色框将合计新值。单击**重新分配资源**后，**摘要**页面会将此值转换为 **VPC** 量，用于计算帐单。然后，需要导航至 Kubernetes 集群，以确保集群有足够的资源用于此重新分配。如果有足够的资源，那么可以单击**重新分配资源**。如果没有足够的资源可用，那么需要增大集群的大小。

用于增大存储器的方法取决于为集群选择的存储类。请参阅云提供者的文档以了解相关信息。在 {{site.data.keyword.cloud_notm}} 中，此主题称为[存储选项](/docs/containers?topic=containers-kube_concepts#kube_concepts){: external}。请注意，在 {{site.data.keyword.cloud_notm}} 中，如果同级或排序节点上的存储量即将耗尽，那么必须在更大的文件系统中部署新的同级或排序节点，并使其通过相同通道上的其他组件同步。

在 {{site.data.keyword.cloud_notm}} 中，可以使用控制台来增大 CPU 和内存（如果 {{site.data.keyword.cloud_notm}} Kubernetes Service 集群中有可用资源）。但是，存储器必须使用 {{site.data.keyword.cloud_notm}} CLI 来增大。有关如何执行此操作的教程，请参阅[更改现有存储设备的大小和 IOPS](/docs/containers?topic=containers-file_storage#file_change_storage_configuration){: external}。如果使用的是除 {{site.data.keyword.cloud_notm}} 之外的云提供者，那么必须查阅该提供者的文档，以了解增大 CPU、内存和存储器的过程。

## 更新组织 MSP 定义
{: #ibp-console-govern-update-msp}

一段时间后，您可能会发现需要更新组织 MSP 定义，例如添加其他组织管理员，或者在控制台中更改 MSP 的显示名称。

- 只需从**组织**选项卡中导出现有 MSP 定义，然后编辑生成的 JSON 文件以修改显示名称、现有证书，或添加新证书。建议不要更改 `msp_id` 字段，因为这可能会导致网络发生重大更改。
- 单击**组织**选项卡中的 MSP 定义以将其打开，然后单击**添加文件**以上传新的 JSON 文件。
- 单击**更新 MSP 定义**。更改将立即生效。

## 更新通道配置
{: #ibp-console-govern-update-channel}

虽然创建通道和更新通道的目标相同，都是为了让用户能够确保其通道的配置尽可能地适合其用例，但实际上这两个过程在控制台中是截然不同的**任务**。回想一下有关[创建通道](/docs/services/blockchain/howto?topic=blockchain-ibp-console-build-network#ibp-console-build-network-create-channel)的文档，此过程由**单个组织**执行。只要组织是排序服务（将成为通道的排序服务）联盟的成员，就能以自己需要的任何方式来创建通道。组织可以为通道提供任何名称，添加任何组织（只要这些组织是联盟的成员），为这些组织分配许可权，设置访问控制表等。

其他组织可以选择是否参与此通道（例如，是否将同级加入此通道），但会假定在组织使用控制台来创建通道之前，通过频带外操作执行选择通道参数的协作过程。

更新通道则完全不同。更新操作**在控制台中**执行，并遵循作为 {{site.data.keyword.blockchainfull_notm}} Platform 运行方式基础的协作管理过程。此协作过程涉及将通道配置更新请求发送到在通道中具有管理角色的组织。这些组织也称为通道**操作节点**。

要更新通道，请单击**通道**选项卡中的通道。单击页面顶部通道名称旁边的**设置**按钮。显示的面板与用于创建通道的面板非常相似。

### 可以更新的通道配置参数
{: #ibp-console-govern-update-channel-available-parameters}

创建通道后，可以更改通道的某些配置参数，但不是全部配置参数都可更改。只有一个参数可以更新，但在通道创建期间不可用。

您将看到**通道名称**已灰显且无法编辑。这反映了通道名称创建后即无法更改这一事实。此外，请注意，排序服务显示名称不存在，因为创建通道后也无法更改通道的排序服务。

但是，可以更改以下通道配置参数：

* **组织**。面板的此部分可用于在通道中添加或除去组织。可以在下拉列表中看到可添加的组织。请注意，组织必须是排序服务联盟的成员才能添加到通道。有关如何将组织添加到联盟的更多信息，请参阅[将组织添加到可以进行事务处理的组织的列表](/docs/services/blockchain/howto?topic=blockchain-ibp-console-build-network#ibp-console-build-network-add-org)。

  您还可以更新通道上组织的许可权级别：

   - 通道**操作员**有权创建通道配置更新并对其签名。每个通道必须至少有一个操作员。
   - 通道**写入者**可以通过调用智能合同来更新通道分类帐。通道写入者还可以实例化通道上的智能合同。
   - 通道**读取者**仅可以查询通道分类帐，例如通过调用智能合同中的只读函数。

* **通道更新策略**。通道的更新策略指定有多少个组织（在通道的操作员总数中）必须核准对通道配置的更新。为了确保协调好通道配置更新的协作管理和高效处理，请考虑将此策略设置为大多数管理员。例如，如果通道中有五个管理员，请选择 `3/5`。

* **区块切分参数**。（高级选项）由于对缺省区块切分参数进行更改必须由排序服务组织的管理员进行签名，因此在通道创建面板中不会显示这些字段。但是，由于此通道配置将发送到通道中的所有相关组织，因此可以发送包含区块切分参数更改的通道配置更新请求。这些字段将确定排序服务切分新区块的条件。有关这些字段如何影响区块切分条件的信息，请参阅[区块切分参数](/docs/services/blockchain/howto?topic=blockchain-ibp-console-govern#ibp-console-govern-orderer-tuning-batch-size)。

* **访问控制表**。（高级选项）要指定对资源更细颗粒度的控制，可以将对资源的访问权限制为某个组织或该组织内的某个角色。例如，将对资源 `ChaincodeExists` 的访问权设置为 `Application/Admins` 意味着只有应用程序的管理员才能访问 `ChaincodeExists` 资源。

如果将对资源的访问权限制为特定组织，请注意，只有该组织才能访问该资源。如果希望其他组织能够访问该资源，必须使用以下字段逐个添加组织。因此，请认真考虑访问控制决策。以特定方式限制对特定资源的访问权会对通道运作方式产生很大的负面影响。
{:important}

由于控制台为单个用户提供了拥有并控制多个组织的能力，因此在**通道更新节点组织**部分中对通道更新签名时，必须指定要使用的组织。如果在此通道中拥有多个组织，那么可以选择在此通道中拥有的任何组织进行签名。根据选择的**通道更新策略**，您可能会收到通知，要求您以拥有的一个或多个其他组织的身份对请求签名。

如果您尝试更改任何**区块切分参数**，并拥有此通道的排序服务组织，那么将看到排序服务组织的字段。从下拉列表中选择相关排序服务组织的 MSP。如果您不是排序服务组织的管理员，那么仍然可以请求更改某个区块切分参数，但请求将由排序服务管理员发送，并且需要该管理员对请求签名。

### 签名收集流程
{: #ibp-console-govern-update-channel-signature-collection}

要验证签名，通道上的组织应该将表示其组织的 MSP（JSON 格式）导出到通道上的其他组织，以及导入其他组织的 MSP。要导出 MSP，请单击 MSP 上的“下载”按钮（在**组织**选项卡上），然后通过频带外操作将其发送给其他组织。收到 JSON 格式的 MSP 后，使用**组织**屏幕将其导入。
{: important}

在发出通道配置更新请求后，该请求会发送到通道中有权对其签名的组织。例如，如果一个通道中有五个操作节点（通道管理员），那么会将该请求发送给所有五个操作节点。要核准通道配置更新，必须满足**通道更新策略**中列出的通道操作节点数。如果此策略显示为 `3/5`，那么通道配置更新将发送给所有五个操作节点，当其中有三个操作节点对其签名时，新的通道配置更新即会生效。

当有更新要签名以及正在对更新签名时，控制台右上角的**通知**按钮（看起来像一个闹铃）将显示相应提示。在**通知**按钮上看到蓝点时，表示有待评估的暂挂请求或正在接收通道更新事件的通知。

单击**通知**按钮时，可能有一个或多个操作可以执行：

* **需要关注**：当前用户需要对请求签名（以同级或排序服务组织身份）或需要提交请求（如果已收集所有必需的签名）。
* **待处理**：包含**需要关注**的所有内容以及用户已签名但仍需要一个或多个其他通道成员签名的请求。
* **已关闭**：已提交的请求。不能对这些项执行任何操作。只能查看这些项。
* **所有**：包括待处理和已关闭的请求。

如果已发出通道配置更新请求，那么将能够单击`查看和更新通道配置`，并查看正在建议或已经执行（如果新通道配置已获核准）的对通道配置更新的更改。如果您是通道上的操作节点，并且收集到的签名不足以核准通道配置更新请求，那么您能够对更新请求签名。

对通道配置更新进行签名并不是必需的，但是也没有方法可签名**反对**通道更新。如果您不赞成通道配置更新，只需关闭该面板，然后通过频带外操作与其他通道操作节点联系，以表达您的担忧。但是，如果通道中有满足通道更新策略的足够操作节点赞成更新，那么新配置将生效。
{:note}

### 配置锚点同级
{: #ibp-console-govern-channels-anchor-peers}

由于必须启用跨组织的 [Gossip](https://hyperledger-fabric.readthedocs.io/en/release-1.4/gossip.html){: external}，服务发现和专用数据才能起作用，因此每个组织必须存在一个锚点同级。此锚点同级并不是特殊**类型**的同级，而只是组织向其他组织公开并用于引导跨组织 Gossip 的同级。因此，必须为集合定义中的每个组织至少定义一个[锚点同级](https://hyperledger-fabric.readthedocs.io/en/release-1.4/gossip.html#anchor-peers){: external}。

要将同级配置为锚点同级，请单击**通道**选项卡，然后打开在其中实例化智能合同的通道。
 - 单击**通道详细信息**选项卡。
 - 向下滚动到“锚点同级”表，然后单击**添加锚点同级**。
 - 从集合定义中的每个组织中至少选择一个同级以作为该组织的锚点同级。出于冗余原因，可以考虑从集合中的每个组织中选择多个同级。

## 调整排序节点
{: #ibp-console-govern-orderer-tuning}

区块链平台的性能可能受许多变量的影响，例如事务大小、区块大小、网络大小以及硬件限制。排序节点包含一组调整参数，可一起用于控制排序节点的吞吐量和性能。可以使用这些参数来定制排序节点如何处理事务，具体取决于您是有大量频繁到达的小型事务，还是有数量较少、到达频率较低的更大型事务。基本上，可以根据事务大小、数量和到达速率来决定何时切分区块。

在控制台中，通过单击**节点**选项卡中的排序节点，然后单击其**设置**图标，可以使用以下参数。单击**高级**按钮以打开排序节点的**高级通道配置**。

### 区块切分参数
{: #ibp-console-govern-orderer-tuning-batch-size}

以下三个参数可一起使用，通过组合设置一个区块中的最大事务数以及区块大小本身来控制何时切分区块。

- **绝对最大字节数**  
  将此值设置为可由排序节点切分的最大区块大小（以字节为单位）。任何事务都不能大于`绝对最大字节数`的值。通常，此设置为`首选最大字节数`的两到十倍不会有任何问题。    
  **注**：允许的最大大小为 99 MB。
- **最大消息计数**   
  将此值设置为可以包含在单个区块中的最大事务数。
- **首选最大字节数**  
  将此值设置为理想的区块大小（以字节为单位），但此值必须小于`绝对最大字节数`。最小事务大小（不包含任何背书）约为 1 KB。如果每个必需的背书增加 1 KB，那么典型的事务大小约为 3-4 KB。因此，建议将`首选最大字节数`的值设置为约等于`最大消息计数 * 预期平均事务大小`。在运行时，区块会尽可能不超过此大小。如果到达的事务导致区块超过此大小，那么会切分该区块，并为该事务创建新区块。但是，如果到达的事务超过此值，但未超过`绝对最大字节数`，那么会包含此事务。如果到达的区块大于`首选最大字节数`，那么该区块只会包含单个事务，并且该事务大小不能大于`绝对最大字节数`。

这些参数可以一起配置，以优化排序节点的吞吐量。

### 批处理超时
{: #ibp-console-govern-orderer-tuning-batch-timeout}

将**超时**值设置为第一个事务到达后但切分区块之前要等待的时间量（以秒为单位）。如果将此值设置得太低，可能会导致批次无法填充达到首选大小。将此值设置得太高会导致排序节点等待区块，并降低总体性能。通常，建议您将`批处理超时`的值至少设置为等于`最大消息计数/每秒最大事务数`。

修改这些参数时，不会影响排序节点上现有通道的行为；确切地说，对排序节点配置所做的任何更改仅应用于在此排序节点上创建的新通道。
{:important}
