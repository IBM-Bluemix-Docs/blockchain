---

copyright:
  years: 2017, 2018
lastupdated: "2018-05-15"
---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:pre: .pre}

# 安裝、實例化及更新鏈碼

鏈碼是以 Go、Java 或 Node.js 撰寫的軟體，其中封裝用來在分類帳中建立及修改資產的商業邏輯和交易指示。鏈碼會在與任何需要與其互動之對等節點相關聯的 Docker 容器中執行。如需開發鏈碼的相關資訊，請參閱[鏈碼指導教學 ![外部鏈結圖示](../images/external_link.svg "外部鏈結圖示")](http://hyperledger-fabric.readthedocs.io/en/latest/chaincode.html)。
{:shortdesc}

鏈碼會安裝在對等節點的檔案系統上，然後在頻道上進行實例化。**所有頻道成員都必須在將執行此鏈碼的每個對等節點上安裝鏈碼。**若要使用相同的鏈碼，頻道成員必須在安裝鏈碼時，為鏈碼提供相同的名稱和版本。然後，實例化步驟包含起始設定鍵值組以及部署鏈碼容器。應用程式用來與鏈碼互動的任何對等節點，都必須要有安裝在對等節點檔案系統上的鏈碼，並且要有執行中的鏈碼容器。**不過，如果對等節點在多個頻道上使用相同的鏈碼，則只需要單一鏈碼容器實例**。

**安裝與實例化的組合**是一種功能強大的特性，因為它可以讓對等節點跨多個頻道來與相同的鏈碼容器互動。唯一的必要條件是要在對等節點的檔案系統上安裝實際鏈碼原始檔。因此，如果共用鏈碼的一部分將用於數個頻道，則對等節點只需要單一鏈碼容器，就可以對所有頻道分類帳執行讀寫。這種輕量型作法證明有利於運算效能和傳輸量，因為網路規模和鏈碼變得更加精密。

**附註**：如果您是以反覆運算方式來開發鏈碼，且需要更新鏈碼，則需要為鏈碼重複安裝和實例化步驟。


## 安裝鏈碼
{: #installchaincode}

您必須在將執行此鏈碼的每個對等節點上安裝鏈碼。請完成下列步驟來安裝鏈碼：
1. 在「網路監視器」的「安裝程式碼」畫面中，從下拉清單中選取要安裝鏈碼的對等節點。按一下**安裝鏈碼**按鈕。
<!--
  ![Chaincode screen](../images/chaincode_install_overview.png "Chaincode screen")
-->

2. 在**安裝鏈碼**蹦現畫面中，輸入鏈碼的名稱和版本。**請注意**，該名稱和版本字串將會在應用程式中用來與已安裝的鏈碼互動。按一下**瀏覽**按鈕，並導覽至本端檔案系統中儲存鏈碼原始檔的任何位置。選取要安裝在對等節點上的一個以上鏈碼原始檔。然後，從**鏈碼類型**下拉清單中選取鏈碼語言。

  ![安裝鏈碼](../images/chaincode_install.png "安裝鏈碼")



## 實例化鏈碼
將鏈碼安裝在加入頻道之每個對等節點的檔案系統上之後，必須在頻道上將鏈碼實例化，這樣對等節點才能透過鏈碼容器來與分類帳互動。實例化作業會執行鏈碼的任何必要起始設定。這通常需要設定包含鏈碼起始廣域狀態的鍵值組。

您必須有頻道的**操作員**或**撰寫者**權限，才能將鏈碼實例化。不同對等節點上具有相同名稱和版本的鏈碼，需要實例化一次，即可部署鏈碼容器。請完成下列步驟來實例化鏈碼：
1. 在「網路監視器」的「安裝程式碼」畫面中，選取已安裝鏈碼的對等節點，並找出您要從鏈碼表格實例化的鏈碼。然後，按一下**動作**標頭下的**實例化**按鈕。
<!--
  ![Instantiate Chaincode](../images/chaincode_instantiate.png "Instantiate Chaincode")
-->

2. 在**實例化鏈碼**蹦現畫面中，將鍵值組設為鏈碼起始設定的引數，然後選取要在其中進行實例化作業的頻道。按一下**提交**。
<!--
  ![Instantiate Chaincode panel](../images/chaincode_instantiate_panel.png "Instantiate Chaincode panel")
-->

## 更新鏈碼
您可以更新鏈碼，以變更鏈碼的程式設計，同時維護其與分類帳上資產的關係。基於安裝與實例化作業的組合，您需要更新含此鏈碼之頻道上所有對等節點上的鏈碼。請完成下列步驟來更新鏈碼。

1. 安裝名稱與舊鏈碼相同但版本不同的鏈碼。您可以遵循與[安裝鏈碼](install_instatiate_chaincode.html#Installing a chaincode)相同的步驟。請確定您選取的頻道與原始鏈碼的頻道相同。

  ![更新鏈碼](../images/upgrade_chaincode.png "更新鏈碼")

2. 在表格中尋找新的鏈碼，然後按一下**動作**標頭下的**更新**按鈕。此動作會將您的鏈碼重新實例化，並將鏈碼容器取代為新的容器。請注意，您不需要輸入任何新的引數作為更新函數的一部分。

  ![「更新」按鈕](../images/upgrade_button.png "「更新」按鈕")
